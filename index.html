<!DOCTYPE html>
<html>
  <head>
    <title>Magic The Gathering Cards</title>
  </head>
  <body>
    <script>
      // ===== Main Title =====
      const title = document.createElement("h1");
      title.textContent = "Magic The Gathering Cards";
      title.style.textAlign = "center";
      title.style.marginTop = "20px";
      title.style.fontFamily = "Arial";
      document.body.appendChild(title);

      const controlsContainer = document.createElement("div");
      controlsContainer.style.display = "flex";
      controlsContainer.style.flexDirection = "column";
      controlsContainer.style.alignItems = "center";
      controlsContainer.style.margin = "20px auto";

      const counter = document.createElement("div");
      counter.textContent = "Selected: 0";
      counter.style.fontSize = "20px";
      counter.style.marginBottom = "10px";

      const buttonsContainer = document.createElement("div");
      buttonsContainer.style.display = "flex";
      buttonsContainer.style.gap = "15px";

      const selectAllBtn = document.createElement("button");
      selectAllBtn.textContent = "Select All";
      selectAllBtn.style.backgroundColor = "#4caf50"; // Green

      const deselectAllBtn = document.createElement("button");
      deselectAllBtn.textContent = "Deselect All";
      deselectAllBtn.style.backgroundColor = "#f44336"; // Red

      [selectAllBtn, deselectAllBtn].forEach((btn) => {
        btn.style.padding = "12px 25px";
        btn.style.border = "none";
        btn.style.color = "white";
        btn.style.fontSize = "16px";
        btn.style.cursor = "pointer";
        btn.style.borderRadius = "6px";
        btn.style.transition = "background 0.3s";
      });

      selectAllBtn.onmouseover = () =>
        (selectAllBtn.style.backgroundColor = "#66bb6a");
      selectAllBtn.onmouseout = () =>
        (selectAllBtn.style.backgroundColor = "#4caf50");

      deselectAllBtn.onmouseover = () =>
        (deselectAllBtn.style.backgroundColor = "#e53935");
      deselectAllBtn.onmouseout = () =>
        (deselectAllBtn.style.backgroundColor = "#f44336");

      buttonsContainer.appendChild(selectAllBtn);
      buttonsContainer.appendChild(deselectAllBtn);

      controlsContainer.appendChild(counter);
      controlsContainer.appendChild(buttonsContainer);
      document.body.appendChild(controlsContainer);

      // ===== Cards Grid =====
      const grid = document.createElement("div");
      grid.style.display = "grid";
      grid.style.gridTemplateColumns = "repeat(auto-fit, minmax(250px, 1fr))";
      grid.style.gap = "20px";
      grid.style.maxWidth = "1000px";
      grid.style.margin = "0 auto 50px auto";
      grid.style.padding = "20px";
      document.body.appendChild(grid);

      // ===== Selection Logic =====
      let selectedCards = new Set();
      let cardElements = [];

      function updateCounter() {
        counter.textContent = `Selected: ${selectedCards.size}`;
      }

      async function fetchData() {
        const response = await fetch(
          "https://api.magicthegathering.io/v1/cards"
        );
        const data = await response.json();
        const cards = data.cards.slice(0, 12); // Display only the first 12 cards - we can add more, but we follow best practices

        cards.forEach((card) => {
          const cardDiv = document.createElement("div");
          cardDiv.style.border = "1px solid #ccc";
          cardDiv.style.borderRadius = "10px";
          cardDiv.style.padding = "16px";
          cardDiv.style.boxShadow = "0 4px 8px rgba(0,0,0,0.1)";
          cardDiv.style.fontFamily = "Arial";
          cardDiv.style.transition = "background 0.3s ease";
          cardDiv.style.display = "flex";
          cardDiv.style.flexDirection = "column";
          cardDiv.style.justifyContent = "space-between";
          cardDiv.style.minHeight = "260px";

          const title = document.createElement("h3");
          title.textContent = card.name || "No Name";
          title.style.margin = "0 0 10px 0";

          const type = document.createElement("p");
          type.textContent = card.type || "Unknown Type";
          type.style.fontSize = "14px";
          type.style.margin = "0 0 10px";

          const text = document.createElement("p");
          text.textContent = card.text || "No Description";
          text.style.fontSize = "13px";
          text.style.color = "#555";
          text.style.flexGrow = "1";

          const btn = document.createElement("button");
          btn.textContent = "Select";
          btn.style.padding = "12px";
          btn.style.marginTop = "15px";
          btn.style.border = "none";
          btn.style.borderRadius = "6px";
          btn.style.backgroundColor = "#4caf50";
          btn.style.color = "white";
          btn.style.cursor = "pointer";
          btn.style.fontSize = "16px";
          btn.style.transition = "background 0.3s";
          btn.style.width = "100%";

          const updateCardStyle = (isSelected) => {
            cardDiv.style.backgroundColor = isSelected ? "#E4EFE7" : "#fff";
            btn.textContent = isSelected ? "Deselect" : "Select";
            btn.style.backgroundColor = isSelected ? "#f44336" : "#4caf50";
          };

          btn.addEventListener("click", () => {
            if (selectedCards.has(card.id)) {
              selectedCards.delete(card.id);
              updateCardStyle(false);
            } else {
              selectedCards.add(card.id);
              updateCardStyle(true);
            }
            updateCounter();
          });

          cardDiv.appendChild(title);
          cardDiv.appendChild(type);
          cardDiv.appendChild(text);
          cardDiv.appendChild(btn);
          grid.appendChild(cardDiv);

          cardElements.push({
            id: card.id,
            element: cardDiv,
            toggle: updateCardStyle,
          });
        });
      }

      selectAllBtn.addEventListener("click", () => {
        cardElements.forEach((item) => {
          selectedCards.add(item.id);
          item.toggle(true);
        });
        updateCounter();
      });

      deselectAllBtn.addEventListener("click", () => {
        selectedCards.clear();
        cardElements.forEach((item) => {
          item.toggle(false);
        });
        updateCounter();
      });

      fetchData();
    </script>
  </body>
</html>
